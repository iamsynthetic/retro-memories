{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useQueryParams = exports.getQueryParams = exports.setQueryParams = void 0;\nvar _react = _interopRequireDefault(require(\"react\"));\nvar _isNode = _interopRequireDefault(require(\"./isNode\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nvar queryParamListeners = [];\nvar queryParamObject = {};\nvar setQueryParams = function setQueryParams(inObj) {\n  var replace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (!(inObj instanceof Object)) {\n    throw new Error('Object required');\n  }\n  if (replace) {\n    queryParamObject = inObj;\n  } else {\n    Object.assign(queryParamObject, inObj);\n  }\n  var now = Date.now();\n  queryParamListeners.forEach(function (cb) {\n    return cb(now);\n  });\n  if (!_isNode.default) {\n    var qs = '?' + objectToQueryString(queryParamObject);\n    if (qs === location.search) {\n      return;\n    }\n    history.replaceState(null, null, location.pathname + (qs !== '?' ? qs : ''));\n  }\n};\nexports.setQueryParams = setQueryParams;\nvar getQueryParams = function getQueryParams() {\n  return Object.assign({}, queryParamObject);\n};\n/**\r\n * This takes an URL query string and converts it into a javascript object.\r\n * @param {string} inStr\r\n * @return {object}\r\n */\n\nexports.getQueryParams = getQueryParams;\nvar queryStringToObject = function queryStringToObject(inStr) {\n  var p = new URLSearchParams(inStr);\n  var result = {};\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n  try {\n    for (var _iterator = p[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var param = _step.value;\n      result[param[0]] = param[1];\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n  return result;\n};\n/**\r\n * This takes a javascript object and turns it into a URL query string.\r\n * @param {object} inObj\r\n * @return {string}\r\n */\n\nvar objectToQueryString = function objectToQueryString(inObj) {\n  var qs = new URLSearchParams();\n  Object.entries(inObj).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      key = _ref2[0],\n      value = _ref2[1];\n    return value !== undefined ? qs.append(key, value) : null;\n  });\n  return qs.toString();\n};\nif (!_isNode.default) {\n  queryParamObject = queryStringToObject(location.search.substr(1));\n}\n/**\r\n * This hook returns the currently set query parameters as object and offers a setter function\r\n * to set a new query string.\r\n *\r\n * All components that are hooked to the query parameters will get updated if they change.\r\n * Query params can also be updated along with the path, by calling `navigate(url, queryParams)`.\r\n *\r\n * @returns {array} [queryParamObject, setQueryParams]\r\n */\n\nvar useQueryParams = function useQueryParams() {\n  var setUpdate = _react.default.useState(0)[1];\n  _react.default.useEffect(function () {\n    queryParamListeners.push(setUpdate);\n    return function () {\n      var index = queryParamListeners.indexOf(setUpdate);\n      if (index === -1) {\n        return;\n      }\n      queryParamListeners.splice(index, 1);\n    };\n  }, [setUpdate]);\n  return [queryParamObject, setQueryParams];\n};\nexports.useQueryParams = useQueryParams;","map":{"version":3,"names":["_react","_interopRequireDefault","require","_isNode","queryParamListeners","queryParamObject","setQueryParams","inObj","replace","arguments","length","undefined","Object","Error","assign","now","Date","forEach","cb","default","qs","objectToQueryString","location","search","history","replaceState","pathname","getQueryParams","queryStringToObject","inStr","p","URLSearchParams","result","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","_step","next","done","param","value","err","return","entries","_ref","_ref2","_slicedToArray","key","append","toString","substr","useQueryParams","setUpdate","useState","useEffect","push","index","indexOf","splice"],"sources":["../src/queryParams.js"],"sourcesContent":["import React from 'react';\r\nimport isNode from './isNode';\r\n\r\nconst queryParamListeners = [];\r\nlet queryParamObject = {};\r\n\r\nexport const setQueryParams = (inObj, replace = false) => {\r\n\tif(!(inObj instanceof Object)){\r\n\t\tthrow new Error('Object required');\r\n\t}\r\n\tif(replace){\r\n\t\tqueryParamObject = inObj;\r\n\t} else {\r\n\t\tObject.assign(queryParamObject, inObj);\r\n\t}\r\n\tconst now = Date.now();\r\n\tqueryParamListeners.forEach(cb => cb(now));\r\n\tif (!isNode) {\r\n\t\tconst qs = '?' + objectToQueryString(queryParamObject);\r\n\t\tif(qs === location.search) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\thistory.replaceState(null, null, location.pathname + (qs !== '?' ? qs : ''));\r\n\t}\r\n};\r\n\r\nexport const getQueryParams = () => Object.assign({}, queryParamObject);\r\n\r\n/**\r\n * This takes an URL query string and converts it into a javascript object.\r\n * @param {string} inStr\r\n * @return {object}\r\n */\r\nconst queryStringToObject = (inStr) => {\r\n\tconst p = new URLSearchParams(inStr);\r\n\tlet result = {};\r\n\tfor (let param of p) {\r\n\t\tresult[param[0]] = param[1];\r\n\t}\r\n\treturn result;\r\n};\r\n\r\n/**\r\n * This takes a javascript object and turns it into a URL query string.\r\n * @param {object} inObj\r\n * @return {string}\r\n */\r\nconst objectToQueryString = (inObj) => {\r\n\tconst qs = new URLSearchParams();\r\n\tObject.entries(inObj).forEach(([key, value]) => value !== undefined ? qs.append(key, value) : null);\r\n\treturn qs.toString();\r\n};\r\n\r\nif(!isNode){\r\n\tqueryParamObject = queryStringToObject(location.search.substr(1));\r\n}\r\n\r\n/**\r\n * This hook returns the currently set query parameters as object and offers a setter function\r\n * to set a new query string.\r\n *\r\n * All components that are hooked to the query parameters will get updated if they change.\r\n * Query params can also be updated along with the path, by calling `navigate(url, queryParams)`.\r\n *\r\n * @returns {array} [queryParamObject, setQueryParams]\r\n */\r\nexport const useQueryParams = () => {\r\n\tconst setUpdate = React.useState(0)[1];\r\n\r\n\tReact.useEffect(() => {\r\n\t\tqueryParamListeners.push(setUpdate);\r\n\r\n\t\treturn () => {\r\n\t\t\tconst index = queryParamListeners.indexOf(setUpdate);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tqueryParamListeners.splice(index, 1);\r\n\t\t};\r\n\t}, [setUpdate]);\r\n\r\n\treturn [queryParamObject, setQueryParams];\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}